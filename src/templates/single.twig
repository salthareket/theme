{% extends "base.twig" %}

{% set page_settings_default = {
    full : true,
    classes : {
        body : (hero?"has-hero":""),
        main : "",
        container : function("block_container", "default"),
        gap : ""
    },
    add_offcanvas : 0,
    offcanvas : {
        individual : false,
        size : "md",
        width : 3,
        position : "start",
        template : "",
        title : "",
    },
    alert : {
        type : "danger",
        title : "",
        message : "",
        position : "top",
        fixed : false,
        class : "",
        html : ""
    },
    paging : {
        posts_per_page : 10,
        page : 1
    }
}
%}

{% if page_settings %}
   {% set page_settings = page_settings_default|array_merge_recursive_items(page_settings) %}
{% else %}
    {% set page_settings = page_settings_default %}
{% endif %}

{% block sidebar_toggler %}
    {% if page_settings.add_offcanvas and page_settings.offcanvas.template != "" %}
        {{ block("sidebar_toggler", page_settings.offcanvas.template) }}
    {% endif %}
{% endblock %}

{% block sidebar %}
    {% if page_settings.add_offcanvas and page_settings.offcanvas.template != "" %}
        {{ block("sidebar", page_settings.offcanvas.template) }}
    {% endif %}
{% endblock %}

{% block hero %}
{% endblock %}

{% block content %}
    {{breadcrumb}}
	<div class="content-wrapper">
		<article class="post-type-{{post.post_type}}" id="post-{{post.ID}}">
			<section class="article-content">
				<h1 class="article-h1">{{post.title}}</h1>
				<p class="blog-author">
					<span>By</span><a href="{{post.author.path}}"> {{ post.author.name }} </a><span>&bull;</span> {{ post.post_date|date}}
				</p>
				{% if post.thumbnail %}
					<img src="{{post.thumbnail.src}}" alt="{{post.thumbnail.alt}}"/>
				{% endif %}
				<div class="article-body">
					{{post.content}}
				</div>
			</section>

    		<!-- comment box -->
            <section class="comment-box">
                <!-- comments -->
                <div class="comments">
                    {% if post.comments %}
                        <h3> comments </h3>
                        {% for cmt in post.comments %}
                            {% include "comment.twig" with {comment:cmt} %}
                        {% endfor %}
                    {% endif %}
                </div>

                {% if post.comment_status == "closed" %}
					<p> comments for this post are closed </p>
				{% else %}
                    <!-- comment form -->
                    {% include "comment-form.twig" %}
                {% endif %}
            </section>
		</article>
	</div><!-- /content-wrapper -->


{% endblock %}

{% block appendix %}
{% endblock %}